// ============================================================================
// Layout
// Content
// ============================================================================


// Layout Logic ---------------------------------------------------------------
@mixin l-content() {
    @include component-page-side-margins();

    padding-top: rem(40);
    padding-bottom: rem(200);

    @supports #{$supports-viewportunits} {
        padding-top: 8vh;
        padding-bottom: 36vh;
    }
}

@mixin l-content-embedded-media() {
    max-width: $global-type-measure * 1.2;
}


// Layout Styling -------------------------------------------------------------
.l-content {
    background-color: c(l-content, background-content);

    z-index: z(l-content);

    // States
    &:focus {
        outline: none; // Removes browser default focus ring when jumping to main content
    }

    // Modes
    @media (prefers-color-scheme: dark) {
        background-color: c(l-content, dark, background-content);
    }

    &__title {
        padding: rem(20) rem(40) ms(1, $unit: rem) rem(40);

        border-top-style: solid;
        border-top-width: border(thicker) * 2;

        background-color: c(l-content, background-title);

        @supports #{$supports-viewportunits} {
            padding-top: 20vh;
            padding-left: 8vw;
            padding-right: 8vw;
        }

        // Modes
        @media (prefers-color-scheme: dark) {
            background-color: c(l-content, dark, background-title);
        }

        // Breakpoints
        @include mappy-bp(palm-medium) {
            padding-top: 25vh;
            padding-bottom: ms(2, $unit: rem);
        }

        @include mappy-bp(lap-small) {
            padding-top: 30vh;
            padding-bottom: ms(12, $unit: rem);
        }

        &--404 {
            border-top-color: c(l-content, border-404);
        }

        &--accessibility-statement {
            border-top-color: c(l-content, border-accessibility);
        }

        &--colophon {
            border-top-color: c(l-content, border-colophon);
        }

        &--office-hours {
            border-top-color: c(l-content, border-office-hours);
        }

        &--old-stuff {
            border-top-color: c(l-content, border-old-stuff);
        }

        &--writing {
            border-top-color: c(l-content, border-writing);
        }

        &--speaking {
            border-top-color: c(l-content, border-speaking);
        }
    }

    &__illustration {
        margin-bottom: ms(1, $unit: rem);
        width: ms(4, $unit: rem);

        fill: c(type, dark);

        // Modes
        @media (prefers-color-scheme: dark) {
            fill: c(type, light);
        }

        // Breakpoints
        @include mappy-bp(palm-medium) {
            width: ms(16, $unit: rem);
        }
    }

    &__body {
        @include l-content();

        max-width: 85ch;

        background-color: c(l-content, background-content);

        // Modes
        @media (prefers-color-scheme: dark) {
            background-color: c(l-content, dark, background-content);
        }
    }

    &__body--post {
        max-width: initial;

        // Breakpoints
        @include mappy-bp(palm-medium) {
            line-height: 1.8;
        }
    }

    p {
        margin-top: ms(4, $unit: em);
        max-width: $global-type-measure;
    }

    ul,
    ol {
        margin-top: ms(4, $unit: em);
    }

    ol {
        li {
            list-style-type: decimal;
        }
    }

    li {
        margin-top: ms(-2, $unit: em);
        margin-left: ms(1, $unit: em);

        list-style-type: disc;

        // Breakpoints
        @include mappy-bp(palm-medium) {
            margin-left: 0;
        }
    }

    ol li ol {
        margin-top: 0;
    }

    ol li ol li {
        margin-left: ms(1, $unit: em);;
    }

    ol li ol li ol li {
        margin-left: ms(1, $unit: em);;
    }

    cite,
    em {
        font-style: italic;
    }

    img {
        @include l-content-embedded-media();

        margin-top: ms(8, $unit: rem);
    }

    figure {
        @include l-content-embedded-media();

        text-align: left;
    }

    figcaption {
        margin-top: ms(0, $unit: em);

        font-size: ms(-1, $unit: em);
    }

    code {
        margin: 0 0.2em;
        background-color: c(l-content, code-background);
        outline: border(thin) solid c(l-content, code-background);
    }

    hr {
        border-color: c(l-content, border-writing);
        margin-top: ms(6, $unit: rem);
        margin-bottom: ms(6, $unit: rem);
        max-width: $global-type-measure;
    }
}
